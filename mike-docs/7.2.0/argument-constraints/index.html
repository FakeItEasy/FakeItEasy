
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Argument constraints - FakeItEasy</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/extra-highlight.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#argument-constraints" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FakeItEasy" class="md-header__button md-logo" aria-label="FakeItEasy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FakeItEasy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Argument constraints
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
            </label>
          
        
      </form>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/FakeItEasy/FakeItEasy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FakeItEasy" class="md-nav__button md-logo" aria-label="FakeItEasy" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    FakeItEasy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/FakeItEasy/FakeItEasy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        FakeItEasy
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../quickstart/" class="md-nav__link">
        Quickstart
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Creating Fakes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Creating Fakes" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Creating Fakes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../creating-fakes/" class="md-nav__link">
        Creating Fakes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../what-can-be-faked/" class="md-nav__link">
        What can be faked
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../default-fake-behavior/" class="md-nav__link">
        Default fake behavior
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-fake-internal-types/" class="md-nav__link">
        How to fake internal (Friend in VB) types
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Specifying Fakes’ Behavior
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Specifying Fakes’ Behavior" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Specifying Fakes’ Behavior
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../specifying-a-call-to-configure/" class="md-nav__link">
        Specifying a Call to Configure
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../specifying-return-values/" class="md-nav__link">
        Specifying Return Values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../throwing-exceptions/" class="md-nav__link">
        Throwing Exceptions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../doing-nothing/" class="md-nav__link">
        Doing Nothing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../assigning-out-and-ref-parameters/" class="md-nav__link">
        Assigning out and ref parameters
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../invoking-custom-code/" class="md-nav__link">
        Invoking Custom Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../calling-base-methods/" class="md-nav__link">
        Calling base methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../calling-wrapped-methods/" class="md-nav__link">
        Calling wrapped methods
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../changing-behavior-between-calls/" class="md-nav__link">
        Changing behavior between calls
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Argument constraints
      </a>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Assertion
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Assertion" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Assertion
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../assertion/" class="md-nav__link">
        Assertion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ordered-assertions/" class="md-nav__link">
        Ordered assertions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faking-async-methods/" class="md-nav__link">
        Faking async methods
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../raising-events/" class="md-nav__link">
        Raising events
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../strict-fakes/" class="md-nav__link">
        Strict fakes
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          Dummies
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Dummies" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Dummies
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../dummies/" class="md-nav__link">
        Dummies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../custom-dummy-creation/" class="md-nav__link">
        Custom Dummy Creation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../implicit-creation-options/" class="md-nav__link">
        Implicit Creation Options
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../formatting-argument-values/" class="md-nav__link">
        Formatting Argument Values
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../scanning-for-extension-points/" class="md-nav__link">
        Scanning for Extension Points
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../bootstrapper/" class="md-nav__link">
        Bootstrapper
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../advanced-usage/" class="md-nav__link">
        Advanced usage
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="/projects/analyzers/" class="md-nav__link">
        Analyzer Packages
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../platform-support/" class="md-nav__link">
        Platform support
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../source-stepping/" class="md-nav__link">
        Source Stepping
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../why-was-fakeiteasy-created/" class="md-nav__link">
        Why was FakeItEasy created?
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../external-resources/" class="md-nav__link">
        External Resources
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/FakeItEasy/FakeItEasy/edit/master/docs/argument-constraints.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="argument-constraints">Argument constraints</h1>
<p>When configuring and <a href="../assertion/">asserting</a> calls in FakeItEasy,
the arguments of the call can be constrained so that only calls to the
configured method where the arguments matches the constraint are
selected.</p>
<h1 id="matching-values-exactly">Matching values exactly</h1>
<p>Assume the following interface exists:</p>
<pre><code class="language-csharp">public interface IFoo
{
    void Bar(string s, int i);
}
</code></pre>
<p>Then the arguments to Bar can be constrained to limit call matching:</p>
<pre><code class="language-csharp">var foo = A.Fake&lt;IFoo&gt;();

A.CallTo(() =&gt; foo.Bar(&quot;hello&quot;, 17)).MustHaveHappened();
</code></pre>
<p>Then FakeItEasy will look <em>only</em> for calls made with the arguments
<code>"hello"</code> and <code>17</code> - no other calls will match the rule.</p>
<p>When checking for argument equality, FakeItEasy uses
<code>object.Equals</code>. If the type to be checked does not provide an
adequate <code>Equals</code> method, you may have to use the <code>That.Matches</code>
method described in <a href="#custom-matching">Custom matching</a>. Be
particularly careful of types whose <code>Equals</code> methods perform reference
equality rather than value equality. In that case, the objects have to
be <em>the same object</em> in order to match, and this sometimes produces
unexpected results. When in doubt, verify the type's <code>Equals</code>
behavior manually.</p>
<h1 id="other-matchers">Other matchers</h1>
<h2 id="ignoring-arguments">Ignoring arguments</h2>
<p>Suppose the value of the integer in the <code>Bar</code> call wasn't important,
but the string was. Then the following constraint could be used:</p>
<pre><code class="language-csharp">A.CallTo(() =&gt; foo.Bar(&quot;hello&quot;, A&lt;int&gt;.Ignored)).MustHaveHappened();
</code></pre>
<p>Then any call will match, so long as the string value was
<code>"hello"</code>. The <code>Ignored</code> property can be used on any type.</p>
<p>An underscore (<code>_</code>) can be used as a shorthand for <code>Ignored</code> as well:</p>
<pre><code class="language-csharp">A.CallTo(() =&gt; foo.Bar(&quot;hello&quot;, A&lt;int&gt;._)).MustHaveHappened();
</code></pre>
<h2 id="more-convenience-matchers">More convenience matchers</h2>
<p>If more complicated constraints are needed, the <code>That</code> method can be
used. There are a few built-in matchers:</p>
<table>
<thead>
<tr>
<th align="left">Matcher</th>
<th align="left">Tests for</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">IsNull()</td>
<td align="left"><code>null</code></td>
</tr>
<tr>
<td align="left">IsNotNull()</td>
<td align="left">not <code>null</code></td>
</tr>
<tr>
<td align="left">IsEqualTo(other)</td>
<td align="left">object equality using <code>object.Equals</code></td>
</tr>
<tr>
<td align="left">IsEqualTo(other, equalityComparer)</td>
<td align="left">object equality using <code>equalityComparer.Equals</code></td>
</tr>
<tr>
<td align="left">IsSameAs(other)</td>
<td align="left">object identity - like <code>object.ReferenceEquals</code></td>
</tr>
<tr>
<td align="left">IsInstanceOf(type)</td>
<td align="left">an argument that can be assigned to a variable of type <code>type</code></td>
</tr>
<tr>
<td align="left">Contains(string)</td>
<td align="left">substring match with ordinal string comparison</td>
</tr>
<tr>
<td align="left">Contains(string, comparisonType)</td>
<td align="left">substring match with the specified comparison type</td>
</tr>
<tr>
<td align="left">StartsWith(string)</td>
<td align="left">substring at beginning of string with ordinal string comparison</td>
</tr>
<tr>
<td align="left">StartsWith(string, comparisonType)</td>
<td align="left">substring at beginning of string with the specified comparison type</td>
</tr>
<tr>
<td align="left">EndsWith(string)</td>
<td align="left">substring at end of string with ordinal string comparison</td>
</tr>
<tr>
<td align="left">EndsWith(string, comparisonType)</td>
<td align="left">substring at end of string with the specified comparison type</td>
</tr>
<tr>
<td align="left">IsNullOrEmpty()</td>
<td align="left"><code>null</code> or <code>""</code></td>
</tr>
<tr>
<td align="left">IsEmpty()</td>
<td align="left">empty enumerable</td>
</tr>
<tr>
<td align="left">Contains(item)</td>
<td align="left">item's presence in an enumerable</td>
</tr>
<tr>
<td align="left">IsSameSequenceAs(enumerable)</td>
<td align="left">sequence equality, like <code>System.Linq.Enumerable.SequenceEqual</code></td>
</tr>
<tr>
<td align="left">IsSameSequenceAs(value1, value2, ...)</td>
<td align="left">sequence equality, like <code>System.Linq.Enumerable.SequenceEqual</code></td>
</tr>
<tr>
<td align="left">Not</td>
<td align="left">inverts the sense of the matcher</td>
</tr>
</tbody>
</table>
<h2 id="custom-matching">Custom matching</h2>
<p>If none of the canned matchers are sufficient, you can provide a
predicate to perform custom matching using <code>That.Matches</code>. Like in
this rather contrived example:</p>
<pre><code class="language-csharp">A&lt;string&gt;.That.Matches(s =&gt; s.Length == 3 &amp;&amp; s[1] == 'X');
</code></pre>
<p>FakeItEasy will evaluate the predicate against any supplied
argument. The predicate can be supplied as an <code>Expression&lt;Func&lt;T, bool&gt;&gt;</code>
or as a <code>Func&lt;T, bool&gt;</code>. FakeItEasy can generate a description
of the matcher when an <code>Expression</code> is supplied (although you may
supply your own as well), but you must supply a description when using
a <code>Func</code>.</p>
<p>For another example of using <code>That.Matches</code>, see Jonathan Channon's
<a href="https://blog.jonathanchannon.com/2013/09/11/comparing-object-instances-with-fakeiteasy">Comparing object instances with FakeItEasy</a>.</p>
<h2 id="always-place-ignored-and-that-inside-acallto">Always place <code>Ignored</code> and <code>That</code> inside <code>A.CallTo</code></h2>
<p>The <code>Ignored</code> (and <code>_</code>) and <code>That</code> matchers must be placed within the
expression inside the <code>A.CallTo</code> call. This is because these special
constraint methods do not return an actual matcher object. They tell
FakeItEasy how to match the parameter via a special event that's fired
when the constraint method is invoked. FakeItEasy only listens to the
events in the context of an <code>A.CallTo</code>.</p>
<p>So, tempting as it might be to save one of the constraints away in a
handy variable, don't do it.</p>
<h2 id="using-correct-grammar">Using correct grammar</h2>
<p>FakeItEasy's API attempts to imitate the English language, so that call
configurations and assertions read naturally. In that spirit, it's
possible to use <code>An&lt;T&gt;</code> instead of <code>A&lt;T&gt;</code> for types whose name starts
with a vowel sound. For instance:</p>
<pre><code class="language-csharp">An&lt;Apple&gt;.That.Matches(a =&gt; a.Color == &quot;Red&quot;)
</code></pre>
<p><code>A&lt;T&gt;</code> and <code>An&lt;T&gt;</code> are exact synonyms and can be used exactly the same
way.</p>
<h1 id="out-parameters"><code>out</code> parameters</h1>
<p>The incoming argument value of <code>out</code> parameters is ignored when matching
calls. The incoming value of an <code>out</code> parameter can't be seen by the
method body anyhow, so there's no advantage to constraining by it.</p>
<p>For example, this test passes:</p>
<pre><code class="language-csharp">string configurationValue = &quot;lollipop&quot;;
A.CallTo(() =&gt; aFakeDictionary.TryGetValue(theKey, out configurationValue))
 .Returns(true);

string fetchedValue = &quot;licorice&quot;;
var success = aFakeDictionary.TryGetValue(theKey, out fetchedValue);

Assert.That(success, Is.True);
</code></pre>
<p>See
<a href="assigning-out-and-ref-parameters#implicitly-assigning-out-parameter-values">Implicitly Assigning <code>out</code> Parameter Values</a>
to learn how the initial <code>configurationValue</code> is used in this case.</p>
<h1 id="ref-parameters"><code>ref</code> parameters</h1>
<p>Due to the limitations of working with <code>ref</code> parameters in C#, only exact-value matching is possible using argument constraints,
and the argument value must be compared against a local variable or a field:</p>
<pre><code class="language-csharp">int someValue = 3;
A.CallTo(() =&gt; aFake.aMethod(ref someValue)).Returns(true);
</code></pre>
<p>To perform more sophisticated matching of <code>ref</code> parameter values in C#, use constraints that work on the entire call, such as <code>WithAnyArguments</code>
or <code>WhenArgumentsMatch</code>, described below.</p>
<p>In addition to constraining by <code>ref</code> argument values, calls can be explicitly configured to
<a href="assigning-out-and-ref-parameters">assign outgoing <code>ref</code> argument values</a>.</p>
<h1 id="overriding-argument-matchers">Overriding argument matchers</h1>
<p>Sometimes individually constraining arguments isn't sufficient. In
such a case, other methods may be used to determine which calls match
the fake's configuration.</p>
<p><em>When using the following methods, any inline argument constraints are ignored, and only the
special method is used to match the call.</em> Some arguments have to be supplied in order to satisfy the compiler,
but the values will not be used, so you can supply whatever values make the code easiest for you to read.</p>
<p><code>WithAnyArguments</code> ensures that no argument constraints will be applied when matching calls:</p>
<pre><code class="language-csharp">A.CallTo(() =&gt; foo.Bar(null, 7)).WithAnyArguments().MustHaveHappened();
</code></pre>
<p>The example above will match any call to <code>foo.Bar</code>, regardless of the arguments. The
<code>Ignored</code> property performs the same task, and is more flexible, but
some people prefer the look of <code>WithAnyArguments</code>.</p>
<p><code>WhenArgumentsMatch</code> accepts a predicate that operates on the entire
collection of call arguments.  For example, to have a Fake throw an
exception when a call is made to <code>Bar</code> where the first arguments is a
string representation of the second, use</p>
<pre><code class="language-csharp">A.CallTo(() =&gt; fake.Bar(null, 0))
    .WhenArgumentsMatch(args =&gt;
        args.Get&lt;string&gt;(&quot;theString&quot;)
            .Equals(args.Get&lt;int&gt;(&quot;theInt&quot;).ToString()))
    .Throws&lt;Exception&gt;();
</code></pre>
<p>Strongly typed overloads of <code>WhenArgumentsMatch</code> are also available for methods of up to 8
parameters (if a method has more parameters, use the variant described above):</p>
<pre><code class="language-csharp">A.CallTo(() =&gt; fake.Bar(null, 0))
    .WhenArgumentsMatch((string theString, int theInt) =&gt;
        theString.Equals(theInt.ToString()))
    .Throws&lt;Exception&gt;();
</code></pre>
<h1 id="nested-argument-constraints">Nested argument constraints</h1>
<p>Note that an argument constraint cannot be "nested" in an argument; the
constraint has to be the whole argument. For instance, the following call
configurations are invalid and will throw an exception:</p>
<pre><code>A.CallTo(() =&gt; fake.Foo(new Bar(A&lt;int&gt;._))).Returns(42);
A.CallTo(() =&gt; fake.Foo(new Bar { X = A&lt;string&gt;.That.Contains(&quot;hello&quot;) })).Returns(42);
</code></pre>
<p>To achieve the desired effect, you can do this instead:</p>
<pre><code>A.CallTo(() =&gt; fake.Foo(A&lt;Bar&gt;._)).Returns(42);
A.CallTo(() =&gt; fake.Foo(A&lt;Bar&gt;.That.Matches(bar =&gt; bar.X.Contains(&quot;hello&quot;)))).Returns(42);
</code></pre>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../changing-behavior-between-calls/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Changing behavior between calls" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Changing behavior between calls
            </div>
          </div>
        </a>
      
      
        
        <a href="../assertion/" class="md-footer__link md-footer__link--next" aria-label="Next: Assertion" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Assertion
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>